---
layout: single
title: "Ethereum Archive Node (Reth + Lighthouse)"
excerpt_separator: <!--more-->
tags: Blockchain Infrastructure
author_profile: true
read_time: true
toc: true
classes: wide
---

The Installation of Ethereum Archive Node using Reth and Lighthouse

<!--more-->

---
### System Information

- **CPU**: 12th Gen Intel® Core™ i9-12900H Processor

- **Memory**: 32GB (16GB * 2) DDR5-4800 RAM

- **Storage**: 4TB PCIe® 4.0 NVMe™ M.2 Performance TLC SSD (WD_BLACK SN850X from [Hardware Comparison](https://gist.github.com/yorickdowne/f3a3e79a573bf35767cd002cc977b038))

- **Network**: 100 Mb/s Download + 20 Mb/s Upload

- **Platform**: Ubuntu 22.04.4 LTS + Linux 6.5.0-25-generic

---
### Step 1 - Rust Installation

1. Install **Rust** using [rustup](https://rustup.rs/):

    ```
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
    ```

    During installation, enter 1 for the default installation when prompted.

2. Check **Cargo** version after Rust installation completes:

    ```
    source $HOME/.cargo/env
    cargo version
    ```

    which is `cargo 1.76.0 (c84b36747 2024-01-18)`

---
### Step 2 - Reth Installation (Build from Source)

Ref: [GitHub](https://github.com/paradigmxyz/reth) & [Docs](https://paradigmxyz.github.io/reth/)

1. Dependencies:
   
   ```
   sudo apt-get update
   sudo apt-get install libclang-dev pkg-config build-essential
   ```

2. Build **Reth**:
   
   ```
   git clone https://github.com/paradigmxyz/reth
   cd reth
   ```

   ```
   cargo install --locked --path bin/reth --bin reth
   ```

3. Check **Reth** version after installation completes:

    ```
    reth --version
    ```

    which is `reth Version: 0.2.0-beta.1`

---
### Step 3 - Lighthouse Installation (Build from Source)

Ref: [GitHub](https://github.com/sigp/lighthouse) & [Docs](https://lighthouse-book.sigmaprime.io/)

1. Dependencies:
   
   ```
   sudo apt-get update
   sudo apt-get install -y git gcc g++ make cmake pkg-config llvm-dev libclang-dev clang
   ```

2. Build **Lighthouse**

    ```
    git clone https://github.com/sigp/lighthouse.git
    cd lighthouse
    ```

    ```
    git checkout stable
    make
    ```

3. Check **Lighthouse** version after installation completes:

    ```
    lighthouse --version
    ```

    which is `Lighthouse v5.0.0-b5bae6e`

---
### Step 4 - Run Ethereum Archive Node on Mainnet

1. Run **Reth** Execution Client

    ```
    RUST_LOG=info reth node
    ```

2. Run **Lighthouse** Consensus Client

    ```
    RUST_LOG=info lighthouse bn \
    --network mainnet \
    --execution-endpoint http://localhost:8551 \
    --execution-jwt /home/<UserName>/.local/share/reth/mainnet/jwt.hex \
    --checkpoint-sync-url https://mainnet.checkpoint.sigp.io
    ```

    You MUST use the same JWT secret in BOTH Reth Execution Client and Lighthouse Consensus Client.

    where `/home/<UserName>/.local/share/reth/mainnet/jwt.hex` is the default JWT secret generated by Reth